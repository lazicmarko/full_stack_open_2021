(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(15),s=n.n(c),r=n(3),a=n(1),u=n(0),o=function(e){var t=e.searchInput,n=e.setSearchInput;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},i=n(6),l=n(4),d=n.n(l),j="/api/persons",b=function(){return d.a.get(j)},f=function(e){return d.a.post(j,e)},h=function(e){return d.a.delete("".concat(j,"/").concat(e))},m=function(e,t){return d.a.put("".concat(j,"/").concat(e),t)},O=function(e){var t=e.persons,n=e.setPersons,c=e.setMessage,s=Object(a.useState)(""),o=Object(r.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(""),b=Object(r.a)(j,2),h=b[0],O=b[1];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={name:l,number:h,id:t.length+1},r={},a=t.find((function(e){return e.name===s.name}));if(a){if(window.confirm("".concat(s.name," is already added to the phonebook, replace the old number?"))){var u=Object(i.a)(Object(i.a)({},a),{},{number:s.number});m(a.id,u).then((function(e){n(t.map((function(t){return t.id!==a.id?t:e.data}))),r.text="Updated ".concat(e.data.name),r.classname="success",c(r),setTimeout((function(){c(null)}),3e3),d(""),O("")})).catch((function(e){r.text="An error has ocurred while updating",r.classname="error",c(r),setTimeout((function(){c(null)}),3e3)}))}}else f(s).then((function(e){r.text="Added ".concat(e.data.name),r.classname="success",n(t.concat(e.data)),c(r),setTimeout((function(){c(null)}),3e3),d(""),O("")})).catch((function(e){r.text="An error has ocurred while adding",r.classname="error",c(r),setTimeout((function(){c(null)}),3e3)}))},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number : ",Object(u.jsx)("input",{value:h,onChange:function(e){O(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.person,n=e.deletePerson;return Object(u.jsxs)("li",{children:[t.name," ",t.number," ",Object(u.jsx)("button",{onClick:function(){return n(t)},children:"delete"})]})},x=function(e){var t=e.persons,n=e.setPersons,c=e.searchInput,s=e.setMessage,r=function(e){var c={};window.confirm("Delete ".concat(e.name," ?"))&&h(e.id).then((function(r){c.text="Deleted ".concat(e.name),c.classname="success",n(t.filter((function(t){return t.id!==e.id}))),s(c),setTimeout((function(){s(null)}),3e3)})).catch((function(e){c.text="An error has ocurred while deleting",c.classname="error",s(c),setTimeout((function(){s(null)}),3e3)}))};return c?Object(u.jsx)("ul",{children:t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(u.jsx)(p,{person:e,deletePerson:r},e.name)}))}):Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(p,{person:e,deletePerson:r},e.name)}))})},v=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:t.classname,children:t.text})},g=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(null),f=Object(r.a)(j,2),h=f[0],m=f[1];return Object(a.useEffect)((function(){b().then((function(e){c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(v,{message:h}),Object(u.jsx)(o,{searchInput:l,setSearchInput:d}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(O,{persons:n,setPersons:c,setMessage:m}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(x,{persons:n,setPersons:c,searchInput:l,setMessage:m})]})};n(39);s.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f89bad35.chunk.js.map